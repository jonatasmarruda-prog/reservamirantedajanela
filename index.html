<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Morro da Mesa</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{margin:0;background:#0b0b0b;font-family:Poppins,sans-serif;color:#fff}
.container{max-width:480px;margin:auto;padding:15px}
.card{background:#141414;border-radius:22px;padding:18px;box-shadow:0 0 25px rgba(0,0,0,.7)}

.banner img{width:100%;border-radius:18px;margin-bottom:15px}

.titulo{text-align:center;font-size:22px;font-weight:700}
.descricao{font-size:14px;color:#ddd;line-height:1.6;margin:10px 0}

.box-info{background:#1f1f1f;padding:12px;border-radius:14px;margin-bottom:15px;font-size:14px}

label{margin-top:12px;display:block;font-weight:600}
select,input{width:100%;padding:14px;border-radius:14px;border:none;background:#2a2a2a;color:#fff}

.contador{display:flex;justify-content:space-between;align-items:center}
.contador button{width:46px;height:46px;border:none;border-radius:14px;background:#333;color:#fff;font-size:22px}

.info{text-align:center;margin-top:10px;font-size:14px}

.barra{
  height:14px;
  background:#333;
  border-radius:20px;
  overflow:hidden;
  margin-top:10px;
}
.progresso{
  height:100%;
  background:linear-gradient(90deg,#00ff9c,#00c96b);
  width:100%;
  transition:.4s;
}

.alerta{
  margin-top:10px;
  text-align:center;
  font-weight:700;
  color:#ffcc00;
  display:none;
  animation:piscando 1s infinite;
}

@keyframes piscando{
  0%{opacity:1}
  50%{opacity:.3}
  100%{opacity:1}
}

.total{font-size:24px;font-weight:700;text-align:center;margin-top:10px;color:#00ff9c}

.btn{
  width:100%;
  margin-top:14px;
  padding:18px;
  border-radius:50px;
  border:none;
  font-size:18px;
  font-weight:700;
  color:#fff;
  cursor:pointer;
}

.pix{background:linear-gradient(135deg,#00ff9c,#00c96b)}
.whats{background:linear-gradient(135deg,#25d366,#1ebd5c);display:none}

.esgotado{
  margin-top:10px;
  background:#550000;
  padding:12px;
  border-radius:14px;
  text-align:center;
  font-weight:700;
  display:none;
}
</style>

<script>
const PIX = "trilheiros.roomt@gmail.com";
const LINK_CARTAO = "https://mpago.li/1Hafude";

let vagasOnibus = localStorage.getItem("vagasOnibus") ? parseInt(localStorage.getItem("vagasOnibus")) : 44;
let vagasCarro  = localStorage.getItem("vagasCarro")  ? parseInt(localStorage.getItem("vagasCarro"))  : 36;
let qtd = 1;

function atualizar(){
  const totalGeral = vagasOnibus + vagasCarro;
  const percentual = (totalGeral / 80) * 100;

  document.getElementById("barra").style.width = percentual + "%";

  infoVagas.innerHTML = `
    ğŸŸï¸ <b>Total:</b> ${totalGeral} / 80<br>
    ğŸšŒ Ã”nibus: ${vagasOnibus}<br>
    ğŸš— Carro prÃ³prio: ${vagasCarro}
  `;

  total.innerText = "ğŸ’° Total: R$ " + ((tipoTransporte.value==="onibus"?85:25) * qtd);

  alerta.style.display = totalGeral <= 5 && totalGeral > 0 ? "block" : "none";

  if(totalGeral <= 0){
    esgotado.style.display = "block";
    btnReservar.style.display = "none";
    btnWhats.style.display = "none";
  }
}

function mais(){qtd++;quantidade.innerText=qtd;atualizar();}
function menos(){if(qtd>1){qtd--;quantidade.innerText=qtd;atualizar();}}

function reservar(){
  const nome = document.getElementById("nome").value.trim();
  const tipo = tipoTransporte.value;
  const pagamento = formaPagamento.value;

  if(!nome){alert("Informe seu nome.");return;}

  if(tipo==="carro" && pagamento==="cartao"){
    alert("Carro prÃ³prio aceita apenas PIX.");
    return;
  }

  if(tipo==="onibus" && pagamento==="cartao" && qtd>1){
    alert("Para mais de uma vaga no cartÃ£o, fale com o Jonatas.");
    return;
  }

  if(tipo==="onibus" && qtd>vagasOnibus) return alert("Vagas insuficientes no Ã´nibus.");
  if(tipo==="carro" && qtd>vagasCarro) return alert("Vagas insuficientes no carro.");

  if(tipo==="onibus") vagasOnibus -= qtd;
  else vagasCarro -= qtd;

  localStorage.setItem("vagasOnibus",vagasOnibus);
  localStorage.setItem("vagasCarro",vagasCarro);

  if(pagamento==="pix"){
    navigator.clipboard.writeText(PIX);
    alert("PIX copiado! Envie o comprovante.");
  }

  if(pagamento==="cartao"){
    window.open(LINK_CARTAO,"_blank");
  }

  btnWhats.style.display="block";
  atualizar();
}

function enviarWhats(){
  const nome=document.getElementById("nome").value;
  const tipo=tipoTransporte.value==="onibus"?"Ã”nibus":"Carro prÃ³prio";
  const valor=(tipo==="Ã”nibus"?85:25)*qtd;

  const msg=`OlÃ¡! ğŸ‘‹
Segue o comprovante da *Trilha do Morro da Mesa* ğŸŒ„

ğŸ‘¤ Nome: ${nome}
ğŸš¶ Modalidade: ${tipo}
ğŸ‘¥ Vagas: ${qtd}
ğŸ’° Valor: R$ ${valor}`;

  window.open("https://wa.me/5566996926174?text="+encodeURIComponent(msg));
}
</script>
</head>

<body>
<div class="container">
<div class="card">

<div class="banner">
<img src="https://i.postimg.cc/FzLnkVc2/Orange-and-Black-Modern-Mountain-Bike-Event-Instagram-Post.png">
</div>

<div class="titulo">â›°ï¸ Subida do Morro da Mesa</div>

<div class="descricao">
ğŸ“… 22 de fevereiro â€¢ â° 02h<br>
ğŸ‘£ 4 km â€¢ âš ï¸ NÃ­vel mÃ©dio/difÃ­cil
</div>

<div class="box-info">
â˜• Levar cafÃ© â€¢ â™»ï¸ Levar lixo<br>
ğŸš« NÃ£o indicado para iniciantes<br>
âœ… Seguro incluso
</div>

<label>Nome completo</label>
<input id="nome">

<label>Transporte</label>
<select id="tipoTransporte" onchange="atualizar()">
  <option value="onibus">ğŸšŒ Ã”nibus â€“ R$ 85</option>
  <option value="carro">ğŸš— Carro prÃ³prio â€“ R$ 25</option>
</select>

<label>Quantidade</label>
<div class="contador">
<button onclick="menos()">âˆ’</button>
<span id="quantidade">1</span>
<button onclick="mais()">+</button>
</div>

<div class="barra"><div id="barra" class="progresso"></div></div>

<div id="infoVagas" class="info"></div>
<div id="alerta" class="alerta">âš ï¸ ÃšLTIMAS VAGAS!</div>
<div id="total" class="total"></div>

<label>Pagamento</label>
<select id="formaPagamento">
  <option value="pix">ğŸ’š PIX</option>
  <option value="cartao">ğŸ’³ CartÃ£o (Ã´nibus)</option>
</select>

<button id="btnReservar" class="btn pix" onclick="reservar()">CONFIRMAR PAGAMENTO</button>

<div id="esgotado" class="esgotado">âŒ VAGAS ESGOTADAS</div>

<button id="btnWhats" class="btn whats" onclick="enviarWhats()">ENVIAR COMPROVANTE</button>

</div>
</div>

<script>atualizar();</script>
</body>
</html>
